@{
    ViewData["Title"] = "Home Page";
}
@section Styles {
    <link rel="stylesheet" href="~/css/home.css">
}
<section class="hero">
    <div class="hero-content">
        <h1 class="hero-title">Научи <span class="text-gradient">JavaScript</span> чрез игри и предизвикателства</h1>
        <p class="hero-text">Присъедини се към нашата общност от програмисти, участвай в двубои, решавай задачи и стани най-добрият!</p>
        <div class="hero-actions">
            <button class="btn btn-primary btn-lg"><i class="fas fa-play"></i> Започни сега</button>
            <button class="btn btn-outline btn-lg"><i class="fas fa-eye"></i> Демо урок</button>
        </div>
    </div>

    <div class="code-container">
        <div class="code-editor">
            <div class="code-header">
                <span class="code-dot red"></span>
                <span class="code-dot yellow"></span>
                <span class="code-dot green"></span>
                <span class="code-title">battle.js</span>
            </div>
            <pre class="code-content"><code id="dynamic-code">// Добре дошли в CodeBattle!
function battle(opponent) {
  const mySkills = ["JavaScript", "Algorithms", "Creativity"];
  const opponentSkills = opponent.skills;

  return mySkills.some(skill => 
    skill === "Creativity" || 
    opponentSkills.includes(skill)
  ) ? "Победа!" : "Опитай пак!";
}

const result = battle({
  name: "Противник",
  skills: ["HTML", "CSS"]
});

console.log(result);</code></pre>
            <button class="run-btn" id="run-code">
                <i class="fas fa-play"></i> Изпълни кода
            </button>
            <div class="code-output" id="code-output"></div>
        </div>
    </div>
</section>

<!-- Features Section -->
<section class="section">
    <h2 class="section-title">Защо <span class="text-gradient">CodeBattle</span>?</h2>

    <div class="features">
        <div class="feature-card">
            <div class="feature-icon">
                <i class="fas fa-trophy"></i>
            </div>
            <h3>Двубои срещу други</h3>
            <p>Състезавай се с реални хора в реално време и докажи своите умения</p>
            <button id="battleBtn" class="btn btn-outline btn-sm">Виж двубоите</button>
        </div>

        <div class="feature-card">
            <div class="feature-icon">
                <i class="fas fa-graduation-cap"></i>
            </div>
            <h3>Интерактивни курсове</h3>
            <p>Учи чрез практика с нашия интерактивен code editor и реални проекти</p>
            <button id="courseBtn" class="btn btn-outline btn-sm">Виж курсовете</button>
        </div>

        <div class="feature-card">
            <div class="feature-icon">
                <i class="fas fa-comments"></i>
            </div>
            <h3>Активен форум</h3>
            <p>Получавай помощ, споделяй знания и обсъждай с други програмисти</p>
            <button id="forumBtn" class="btn btn-outline btn-sm">Виж форума</button>
        </div>
    </div>
</section>

<!-- Courses Section -->
<section class="section" id="courses">
    <h2 class="section-title">Нашите <span class="text-gradient">Курсове</span></h2>

    <div class="courses">
        <div class="course-card">
            <span class="course-badge badge-beginner">Начинаещ</span>
            <div class="course-icon">
                <i class="fab fa-js"></i>
            </div>
            <h3>JavaScript Основи</h3>
            <p>Научи основите на JavaScript за 4 седмици с интерактивни упражнения</p>
            <div class="course-meta">
                <span><i class="fas fa-clock"></i> 20 урока</span>
                <span><i class="fas fa-users"></i> 1500+ ученици</span>
            </div>
            <div class="course-progress">
                <div class="progress-bar" style="width: 30%;"></div>
                <div class="progress-text">
                    <span>Напредък</span>
                    <span>30%</span>
                </div>
            </div>
            <button class="btn btn-outline">Продължи</button>
        </div>

        <div class="course-card">
            <span class="course-badge badge-intermediate">Средно ниво</span>
            <div class="course-icon">
                <i class="fas fa-layer-group"></i>
            </div>
            <h3>DOM Манипулация</h3>
            <p>Работа с HTML и CSS чрез JavaScript и създаване на динамични уеб приложения</p>
            <div class="course-meta">
                <span><i class="fas fa-clock"></i> 15 урока</span>
                <span><i class="fas fa-users"></i> 850+ ученици</span>
            </div>
            <div class="course-progress">
                <div class="progress-bar" style="width: 10%;"></div>
                <div class="progress-text">
                    <span>Напредък</span>
                    <span>10%</span>
                </div>
            </div>
            <button class="btn btn-outline">Започни</button>
        </div>

        <div class="course-card">
            <span class="course-badge badge-advanced">Напреднал</span>
            <div class="course-icon">
                <i class="fas fa-bolt"></i>
            </div>
            <h3>Асинхронен JavaScript</h3>
            <p>Научи Promises, async/await, API заявки и обработка на грешки</p>
            <div class="course-meta">
                <span><i class="fas fa-clock"></i> 12 урока</span>
                <span><i class="fas fa-users"></i> 500+ ученици</span>
            </div>
            <div class="course-progress">
                <div class="progress-bar" style="width: 0%;"></div>
                <div class="progress-text">
                    <span>Напредък</span>
                    <span>0%</span>
                </div>
            </div>
            <button class="btn btn-outline">Започни</button>
        </div>
    </div>
</section>

<!-- Battles Section -->
<section class="section" id="battles">
    <h2 class="section-title">Активни <span class="text-gradient">Двубои</span></h2>

    <div class="battles">
        <div class="battle-card">
            <span class="battle-tag">В процес</span>
            <h3>Оптимизиране на алгоритъм</h3>
            <p>Състезание за най-бързо решение на класически проблем с сортиране</p>
            <div class="battle-stats">
                <div class="stat">
                    <i class="fas fa-clock"></i> 2:35:12
                </div>
                <div class="stat">
                    <i class="fas fa-trophy"></i> 50 XP
                </div>
            </div>
            <div class="battle-participants">
                <div class="participant">ИВ</div>
                <div class="participant">ПК</div>
                <div class="participant">МГ</div>
                <div class="participant more-participants">+5</div>
            </div>
            <button class="btn btn-primary">Присъедини се</button>
        </div>

        <div class="battle-card">
            <span class="battle-tag">Започва скоро</span>
            <h3>Създай най-добрия UI</h3>
            <p>Двубой за създаване на най-интерактивен потребителски интерфейс</p>
            <div class="battle-stats">
                <div class="stat">
                    <i class="fas fa-clock"></i> 1:00:00
                </div>
                <div class="stat">
                    <i class="fas fa-trophy"></i> 75 XP
                </div>
            </div>
            <div class="battle-participants">
                <div class="participant">АБ</div>
                <div class="participant">ДП</div>
                <div class="participant more-participants">+3</div>
            </div>
            <button class="btn btn-outline">Изчакай</button>
        </div>

        <div class="battle-card">
            <span class="battle-tag">Завършен</span>
            <h3>Code Golf - Най-кратко решение</h3>
            <p>Кой ще напише най-кратко решение на дадения проблем?</p>
            <div class="battle-stats">
                <div class="stat">
                    <i class="fas fa-check-circle"></i> Завършен
                </div>
                <div class="stat">
                    <i class="fas fa-trophy"></i> 30 XP
                </div>
            </div>
            <div class="battle-participants">
                <div class="participant">ГД</div>
                <div class="participant">ЛМ</div>
                <div class="participant more-participants">+8</div>
            </div>
            <button class="btn btn-outline">Виж резултати</button>
        </div>
    </div>
</section>

<!-- Forum Section -->
<section class="section" id="forum">
    <h2 class="section-title">Последни <span class="text-gradient">Дискусии</span></h2>

    <div class="forum-posts">
        <div class="forum-card">
            <div class="user-avatar">ИВ</div>
            <div class="post-content">
                <div class="post-header">
                    <span class="post-user">Иван Василев</span>
                    <span class="post-time">преди 2 часа</span>
                </div>
                <h4 class="post-title">Как да оптимизирам този алгоритъм?</h4>
                <p class="post-text">Имам проблем с оптимизирането на моя алгоритъм за сортиране. Някой може ли да ми помогне да го направя по-бърз? Кодът е в първия коментар...</p>
                <div class="post-stats">
                    <div class="post-stat">
                        <i class="fas fa-comment"></i> 7 отговора
                    </div>
                    <div class="post-stat">
                        <i class="fas fa-eye"></i> 42 прегледа
                    </div>
                </div>
            </div>
        </div>

        <div class="forum-card">
            <div class="user-avatar">МГ</div>
            <div class="post-content">
                <div class="post-header">
                    <span class="post-user">Мария Георгиева</span>
                    <span class="post-time">преди 5 часа</span>
                </div>
                <h4 class="post-title">Най-добри практики за async/await</h4>
                <p class="post-text">Споделете вашите най-добри практики при работа с асинхронен код. Как избягвате "callback hell" и как обработвате грешките...</p>
                <div class="post-stats">
                    <div class="post-stat">
                        <i class="fas fa-comment"></i> 12 отговора
                    </div>
                    <div class="post-stat">
                        <i class="fas fa-eye"></i> 89 прегледа
                    </div>
                </div>
            </div>
        </div>

        <div class="forum-card">
            <div class="user-avatar">ПК</div>
            <div class="post-content">
                <div class="post-header">
                    <span class="post-user">Петър Колев</span>
                    <span class="post-time">преди 1 ден</span>
                </div>
                <h4 class="post-title">Как да подготвя интервю за JavaScript разработчик?</h4>
                <p class="post-text">Имам интервю след 2 седмици за junior JavaScript позиция. Какви теми трябва да разгледам и какви видове въпроси мога да очаквам...</p>
                <div class="post-stats">
                    <div class="post-stat">
                        <i class="fas fa-comment"></i> 15 отговора
                    </div>
                    <div class="post-stat">
                        <i class="fas fa-eye"></i> 120 прегледа
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>
@section Scripts {
    <script>
        // Run Code Button
           document.getElementById('run-code').addEventListener('click', function() {
               const codeOutput = document.getElementById('code-output');
               const code = document.getElementById('dynamic-code').textContent;

               try {
                   // Clear previous output
                   codeOutput.innerHTML = '';

                   // Override console.log to capture output
                   const oldLog = console.log;
                   console.log = function(message) {
                       const outputLine = document.createElement('div');
                       outputLine.textContent = message;
                       codeOutput.appendChild(outputLine);
                       oldLog.apply(console, arguments);
                   };

                   // Execute the code
                   new Function(code)();

                   // Restore original console.log
                   console.log = oldLog;

                   // Add success message if no output was produced
                   if (codeOutput.innerHTML === '') {
                       codeOutput.innerHTML = '<div style="color: var(--success)">Кодът се изпълни успешно!</div>';
                   }
               } catch (error) {
                   codeOutput.innerHTML = `<div style="color: var(--danger)">Грешка: ${error.message}</div>`;
               }
           });

           // Animated typing effect for code
           const codeElement = document.getElementById('dynamic-code');
           const originalCode = codeElement.textContent;
           codeElement.textContent = '';

           let i = 0;
           const typingInterval = setInterval(function() {
               if (i < originalCode.length) {
                   codeElement.textContent += originalCode.charAt(i);
                   i++;
               } else {
                   clearInterval(typingInterval);
               }
           }, 20);

           //Add location to button
              document.getElementById("forumBtn").addEventListener('click', function() {
                  window.location.href = '/Forum/Index';
              });
              document.getElementById("courseBtn").addEventListener('click', function() {
                    window.location.href = '/Courses/Index';
                  });
              document.getElementById("battleBtn").addEventListener('click', function() {
                    window.location.href = '/Battles/Index';
                  });

    </script>
}